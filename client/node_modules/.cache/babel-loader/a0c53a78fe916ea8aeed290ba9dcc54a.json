{"ast":null,"code":"import r from \"immer\";\nimport { useState as t, useReducer as n, useCallback as o } from \"react\";\n\nfunction i(n) {\n  var i = t(n),\n      m = i[1];\n  return [i[0], o(function (t) {\n    m(r(t));\n  }, [])];\n}\n\nfunction m(t, i, m) {\n  var e = o(r(t), [t]);\n  return n(e, i, m);\n}\n\nexport { i as useImmer, m as useImmerReducer };","map":{"version":3,"sources":["../src/index.ts"],"names":["useImmer","initialValue","useState","useCallback","updater","updateValue","produce","useImmerReducer","reducer","initialState","initialAction","cachedReducer","useReducer"],"mappings":";;;SAWgBA,C,CAASC,C,EAAAA;AAAAA,MAAAA,CAAAA,GACIC,CAAAA,CAASD,CAATC,CADJD;AAAAA,MACaA,CAAAA,GAAAA,CAAAA,CAAAA,CAAAA,CADbA;AACaA,SAC7B,CAAA,CAAA,CAAA,CAAA,CAAA,EAELE,CAAAA,CAAAA,UAAYC,CAAZD,EAAYC;AACVC,IAAAA,CAAAA,CAAYC,CAAAA,CAAQF,CAARE,CAAZD,CAAAA;AAAoBD,GADtBD,EAEG,EAFHA,CAFK,CAD6BF;AActC;;AAAA,SAAgBM,CAAhB,CAAgCC,CAAhC,EAAyCC,CAAzC,EAAuDC,CAAvD,EAAuDA;AAAAA,MAC/CC,CAAAA,GAAgBR,CAAAA,CAAYG,CAAAA,CAAQE,CAARF,CAAZH,EAA8B,CAACK,CAAD,CAA9BL,CAD+BO;AACAF,SAC9CI,CAAAA,CAAWD,CAAXC,EAA0BH,CAA1BG,EAA+CF,CAA/CE,CAD8CJ;AACCE;;AAAAA,SAAAA,CAAAA,IAAAA,QAAAA,EAAAA,CAAAA,IAAAA,eAAAA","sourcesContent":["import produce, { Draft } from \"immer\";\nimport { useState, useReducer, useCallback } from \"react\";\n\nexport type Reducer<S = any, A = any> = (\n  draftState: Draft<S>,\n  action: A\n) => void | S;\n\nexport function useImmer<S = any>(\n  initialValue: S | (() => S)\n): [S, (f: (draft: Draft<S>) => void | S) => void];\nexport function useImmer(initialValue: any) {\n  const [val, updateValue] = useState(initialValue);\n  return [\n    val,\n    useCallback(updater => {\n      updateValue(produce(updater));\n    }, [])\n  ];\n}\n\nexport function useImmerReducer<S = any, A = any>(\n  reducer: Reducer<S, A>,\n  initialState: S,\n  initialAction?: (initial: any) => S\n): [S, React.Dispatch<A>];\nexport function useImmerReducer(reducer, initialState, initialAction) {\n  const cachedReducer = useCallback(produce(reducer), [reducer]);\n  return useReducer(cachedReducer, initialState as any, initialAction);\n}\n"]},"metadata":{},"sourceType":"module"}